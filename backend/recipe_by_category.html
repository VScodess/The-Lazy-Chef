<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Recipes by Category</title>
</head>

<body>
    <h1>Recipes by Category</h1>

    <div>
        <label for="category">Enter Category:</label>
        <input type="text" id="category" placeholder="Category (e.g., Dinner, Lunch)">
        <button onclick="fetchRecipesByCategory()">Get Recipes</button>
    </div>

    <div id="recipesList" style="margin-top: 20px;">
        <!-- Recipes will be displayed here -->
    </div>

    <script>
        function fetchRecipesByCategory() {
            const category = document.getElementById('category').value;
            const url = `http://localhost:8080/recipes/${category}`;

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('No recipes found for the given category');
                    }
                    return response.json();
                })
                .then(data => {
                    displayRecipes(data);
                })
                .catch(error => {
                    document.getElementById('recipesList').innerHTML = `<p style="color: red;">${error.message}</p>`;
                });
        }

        function displayRecipes(recipes) {
            let recipesList = '';

            recipes.forEach(recipe => {
                recipesList += `
                    <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
                        <h2>${recipe.name}</h2>
                        <p><strong>Category:</strong> ${recipe.category}</p>
                        <p><strong>Summary:</strong> ${recipe.summary}</p>
                        <p><strong>Ingredients:</strong></p>
                        <ul>
                            ${recipe.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}
                        </ul>
                        <p><strong>Steps:</strong></p>
                        <ol>
                            ${recipe.steps.map(step => `<li>${step}</li>`).join('')}
                        </ol>
                        <p><strong>Tags:</strong> ${recipe.tags.join(', ')}</p>
                        <img src="data:image/jpeg;base64,${recipe.image}" alt="Recipe Image" style="max-width: 200px;">
                    </div>
                `;
            });

            document.getElementById('recipesList').innerHTML = recipesList;
        }
    </script>
</body>

</html>