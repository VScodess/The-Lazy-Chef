<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Recipe</title>
</head>

<body>
    <h1>Recipe Details</h1>

    <div>
        <label for="recipeId">Enter Recipe ID:</label>
        <input type="text" id="recipeId" placeholder="Recipe ID">
        <button onclick="fetchRecipe()">Get Recipe</button>
    </div>

    <div id="recipeDetails" style="margin-top: 20px;">
        <!-- Recipe details will be displayed here -->
    </div>

    <script>
        function fetchRecipe() {
            const recipeId = document.getElementById('recipeId').value;
            const url = `http://localhost:8080/recipes/dinner/${recipeId}`; // Adjust category if needed

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Recipe not found');
                    }
                    return response.json();
                })
                .then(data => {
                    displayRecipe(data);
                })
                .catch(error => {
                    document.getElementById('recipeDetails').innerHTML = `<p style="color: red;">${error.message}</p>`;
                });
        }

        function displayRecipe(recipe) {
            const recipeDetails = `
                <h2>${recipe.name}</h2>
                <p><strong>Category:</strong> ${recipe.category}</p>
                <p><strong>Summary:</strong> ${recipe.summary}</p>
                <p><strong>Ingredients:</strong></p>
                <ul>
                    ${recipe.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}
                </ul>
                <p><strong>Steps:</strong></p>
                <ol>
                    ${recipe.steps.map(step => `<li>${step}</li>`).join('')}
                </ol>
                <p><strong>Tags:</strong> ${recipe.tags.join(', ')}</p>
                <img src="data:image/jpeg;base64,${recipe.image}" alt="Recipe Image" style="max-width: 400px;">
            `;

            document.getElementById('recipeDetails').innerHTML = recipeDetails;
        }
    </script>
</body>

</html>